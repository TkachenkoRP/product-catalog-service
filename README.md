# Каталог Товаров

## Описание приложения

Веб-приложение для управления каталогом товаров с системой аутентификации и авторизации, возможностью сохранения данных
в реляционной базе данных.

## Используемые технологии

* Java 17
* Maven
* Jakarta Servlet
* MapStruct
* JDBC
* PostgreSQL
* Liquibase
* JDBC
* Jackson
* AssertJ
* JUnit 5
* Mockito
* Testcontainers
* Кеширование Redis

## Функциональность

### Аутентификация и авторизация

- Регистрация новых пользователей (`/auth?action=register`)
- Вход в систему (`/auth?action=login`)
- Выход из системы (`/auth?action=logout`)
- Валидация учетных данных

### Управление пользователями

- Просмотр списка пользователей (`GET /user`)
- Просмотр профиля пользователя по ID (`GET /user?id={id}`)
- Обновление данных пользователя (`PUT /user?id={id}`)
- Удаление пользователей (`DELETE /user?id={id}`)

### Управление товарами

- CRUD операции с товарами (`GET/POST/PUT/DELETE /product`)
- Фильтрация товаров по различным критериям:
    - Категория (`categoryId`)
    - Бренд (`brandId`)
    - Диапазон цен (`minPrice`, `maxPrice`)
    - Минимальное количество на складе (`minStock`)
- Валидация данных при создании и обновлении

### Управление справочниками

- Категории - CRUD операции (`/category`)
- Бренды - CRUD операции (`/brand`)
- Проверка уникальности названий категорий и брендов
- Защита от удаления используемых в товарах категорий и брендов

## Структура API

### Формат запросов

- Все запросы с телом используют JSON формат
- Параметры передаются через query parameters
- Стандартные HTTP методы: GET, POST, PUT, DELETE

### Формат ответов

```json
{
  "success": true,
  "data": {
    ...
  },
  "message": "Опциональное сообщение"
}
```

или при ошибке:

```json
{
  "success": false,
  "data": null,
  "message": "Сообщение об ошибке"
}
```

## База данных

- Используется PostgreSQL как основная СУБД
- Миграции управляются через Liquibase
- Автоматическое создание и обновление схемы при запуске

## Запуск и развертывание

- Убедитесь, что установлены Java 17 и Maven
- Настройте подключение к PostgreSQL в конфигурации
- Запустите приложение на сервере приложений (Tomcat/Jetty)
- Приложение автоматически создаст необходимые таблицы через Liquibase

## Дополнительная информация

По умолчанию имеется пользователь с ролью администратора:  
Логин: admin@my.ru  
Пароль: aDmIn  
А так же пользователь с ролью пользователя:  
Логин: user@my.ru  
Пароль: UsEr